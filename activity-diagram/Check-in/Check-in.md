@startuml
title Check-in\n(ลงทะเบียนเข้าพัก)
start

:ตรวจสอบข้อมูลลูกค้าในระบบ;

if (เคยลงทะเบียนแล้ว?) then (ไม่ใช่)
    :ลงทะเบียนสมาชิก|
else (ใช่)
endif

:กรอกข้อมูลผู้เข้าพัก;
note right 
    เลือกข้อมูลที่ได้หลัง
    จากการสมัครสมาชิก
endnote

:ตั้งชื่อ group;
note right: (default: ชื่อ-สกุล ผู้พัก)

if (มีการจอง?) then (ใช่)
    :เลือกข้อมูลจาก\n"ข้อมูลการจอง";
else (ไม่)
    :กรอกวันที่เข้า-ออก;
    note right
        Fix วันที่"เข้า"
        เป็นวันเวลาปัจจุบัน
    endnote

    :เลือกห้องพักที่ว่าง|
    note right
        - (disabled) ต้องกรอก
        วันที่เข้า-ออก ก่อน
        จึงสามารถเลือกห้องได้
        - เลือกได้เฉพาะห้องที่ว่าง
        ตามช่วงเวลาที่กรอกมา
    endnote

endif

(B)
if (มีชื่อ group นี้ในระบบ?) then (มี)
    if (เจ้าของชื่อ group คือ\nmaster ที่กำลัง Check-in?) then (ใช่)
        :         ระบบแจ้ง\n"ต้องการเพิ่มห้องใน\n group เดิมหรือไม่?;
        if (เพิ่มห้องใน group เดิม?") then (ใช่)
        :tag ว่าเป็นการ\nเพิ่มห้องใน group เดิม;
        else (ไม่)
            (A)
            detach
        endif
    else (ไม่)
        (A)
        detach
    endif
else (ไม่มี)
    :tag ว่าเป็นการ\nสร้าง master ใหม่;    
endif

:คิดเงิน|
:บันทึกข้อมูลการ Check-in;
note right
    - จัดการห้องที่ถูก Check-in 
      ให้กลายเป็นห้องที่มีการเข้าพัก
endnote
stop

(A)
:            ระบบแจ้ง\n"กรุณาเปลี่ยนชื่อ group";
:เปลี่ยนชื่อ group;
(B)

@enduml